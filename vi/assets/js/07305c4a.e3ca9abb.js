"use strict";(self.webpackChunkagritrace_docs=self.webpackChunkagritrace_docs||[]).push([[652],{4271:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>l});var s=i(4848),r=i(8453);const t={id:"index",title:"API Reference",sidebar_label:"\ud83d\udcda API Overview"},a="AgriTrace API Reference",c={id:"index",title:"API Reference",description:"Welcome to the AgriTrace API documentation. This API provides comprehensive endpoints for managing agricultural product traceability, QR code generation, and user management.",source:"@site/api/index.md",sourceDirName:".",slug:"/",permalink:"/AgriTrace_docs/vi/api-reference/",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"index",title:"API Reference",sidebar_label:"\ud83d\udcda API Overview"},sidebar:"apiSidebar",next:{title:"Login",permalink:"/AgriTrace_docs/vi/api-reference/auth/login"}},d={},l=[{value:"\ud83d\udd17 Base URL",id:"-base-url",level:2},{value:"\ud83d\udd10 Authentication",id:"-authentication",level:2},{value:"Getting a Token",id:"getting-a-token",level:3},{value:"\ud83d\udcca Response Format",id:"-response-format",level:2},{value:"Success Response",id:"success-response",level:3},{value:"Error Response",id:"error-response",level:3},{value:"\ud83d\udccb HTTP Status Codes",id:"-http-status-codes",level:2},{value:"\ud83d\udd04 Rate Limiting",id:"-rate-limiting",level:2},{value:"\ud83d\udcf1 Mobile App Integration",id:"-mobile-app-integration",level:2},{value:"React Native Example",id:"react-native-example",level:3},{value:"\ud83c\udf10 Web Dashboard Integration",id:"-web-dashboard-integration",level:2},{value:"JavaScript Example",id:"javascript-example",level:3},{value:"\ud83d\udd0d API Endpoints Overview",id:"-api-endpoints-overview",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Users",id:"users",level:3},{value:"Products &amp; Batches",id:"products--batches",level:3},{value:"QR Codes",id:"qr-codes",level:3},{value:"Reviews",id:"reviews",level:3},{value:"Admin (Admin only)",id:"admin-admin-only",level:3},{value:"\ud83e\uddea Testing the API",id:"-testing-the-api",level:2},{value:"Using cURL",id:"using-curl",level:3},{value:"Using Postman",id:"using-postman",level:3},{value:"\ud83d\udcde Support",id:"-support",level:2}];function o(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"agritrace-api-reference",children:"AgriTrace API Reference"}),"\n",(0,s.jsx)(n.p,{children:"Welcome to the AgriTrace API documentation. This API provides comprehensive endpoints for managing agricultural product traceability, QR code generation, and user management."}),"\n",(0,s.jsx)(n.h2,{id:"-base-url",children:"\ud83d\udd17 Base URL"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Production: https://api.agritrace.vn/api\nDevelopment: http://localhost:3000/api\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-authentication",children:"\ud83d\udd10 Authentication"}),"\n",(0,s.jsx)(n.p,{children:"AgriTrace API uses JWT (JSON Web Tokens) for authentication. Include the token in the Authorization header:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"Authorization: Bearer <your_jwt_token>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getting-a-token",children:"Getting a Token"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://api.agritrace.vn/api/auth/login \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "email": "farmer@example.com",\n    "password": "your_password"\n  }\'\n'})}),"\n",(0,s.jsx)(n.p,{children:"Response:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",\n  "user": {\n    "id": 1,\n    "email": "farmer@example.com",\n    "role": "farmer",\n    "fullName": "Nguyen Van A"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"-response-format",children:"\ud83d\udcca Response Format"}),"\n",(0,s.jsx)(n.p,{children:"All API responses follow a consistent format:"}),"\n",(0,s.jsx)(n.h3,{id:"success-response",children:"Success Response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    // Response data\n  },\n  "message": "Operation completed successfully"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"error-response",children:"Error Response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "error": {\n    "code": "VALIDATION_ERROR",\n    "message": "Invalid input data",\n    "details": {\n      "field": "productName",\n      "message": "Product name is required"\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"-http-status-codes",children:"\ud83d\udccb HTTP Status Codes"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Code"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"200"}),(0,s.jsx)(n.td,{children:"Success"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"201"}),(0,s.jsx)(n.td,{children:"Created"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"400"}),(0,s.jsx)(n.td,{children:"Bad Request"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"401"}),(0,s.jsx)(n.td,{children:"Unauthorized"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"403"}),(0,s.jsx)(n.td,{children:"Forbidden"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"404"}),(0,s.jsx)(n.td,{children:"Not Found"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"422"}),(0,s.jsx)(n.td,{children:"Validation Error"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"500"}),(0,s.jsx)(n.td,{children:"Internal Server Error"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"-rate-limiting",children:"\ud83d\udd04 Rate Limiting"}),"\n",(0,s.jsx)(n.p,{children:"API requests are rate-limited to ensure fair usage:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Authentication endpoints"}),": 10 requests per minute"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"General endpoints"}),": 100 requests per minute"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"QR code generation"}),": 50 requests per minute"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Rate limit headers are included in responses:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"X-RateLimit-Limit: 100\nX-RateLimit-Remaining: 95\nX-RateLimit-Reset: 1640995200\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-mobile-app-integration",children:"\ud83d\udcf1 Mobile App Integration"}),"\n",(0,s.jsx)(n.h3,{id:"react-native-example",children:"React Native Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'https://api.agritrace.vn/api',\n  timeout: 10000,\n});\n\n// Add auth token to requests\napi.interceptors.request.use((config) => {\n  const token = AsyncStorage.getItem('authToken');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Handle response errors\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      // Redirect to login\n      AsyncStorage.removeItem('authToken');\n    }\n    return Promise.reject(error);\n  }\n);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-web-dashboard-integration",children:"\ud83c\udf10 Web Dashboard Integration"}),"\n",(0,s.jsx)(n.h3,{id:"javascript-example",children:"JavaScript Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"class AgriTraceAPI {\n  constructor(baseURL = 'https://api.agritrace.vn/api') {\n    this.baseURL = baseURL;\n    this.token = localStorage.getItem('authToken');\n  }\n\n  async request(endpoint, options = {}) {\n    const url = `${this.baseURL}${endpoint}`;\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        ...(this.token && { Authorization: `Bearer ${this.token}` }),\n        ...options.headers,\n      },\n      ...options,\n    };\n\n    try {\n      const response = await fetch(url, config);\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error?.message || 'API request failed');\n      }\n\n      return data;\n    } catch (error) {\n      console.error('API Error:', error);\n      throw error;\n    }\n  }\n\n  async login(email, password) {\n    const response = await this.request('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({ email, password }),\n    });\n\n    this.token = response.data.token;\n    localStorage.setItem('authToken', this.token);\n    return response;\n  }\n\n  async createBatch(batchData) {\n    return await this.request('/batches/create', {\n      method: 'POST',\n      body: JSON.stringify(batchData),\n    });\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-api-endpoints-overview",children:"\ud83d\udd0d API Endpoints Overview"}),"\n",(0,s.jsx)(n.h3,{id:"authentication",children:"Authentication"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /auth/login"})," - User login"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /auth/register"})," - User registration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /auth/refresh"})," - Refresh access token"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /auth/logout"})," - User logout"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"users",children:"Users"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /users/profile"})," - Get user profile"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"PUT /users/profile"})," - Update user profile"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"DELETE /users/profile"})," - Delete user account"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"products--batches",children:"Products & Batches"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /batches/create"})," - Create new batch"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /batches"})," - List user batches"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /batches/:id"})," - Get batch details"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"PUT /batches/:id"})," - Update batch"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"DELETE /batches/:id"})," - Delete batch"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /products/categories"})," - Get product categories"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"qr-codes",children:"QR Codes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /qr/generate/:batchId"})," - Generate QR code"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /qr/scan"})," - Scan QR code"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /qr/validate/:code"})," - Validate QR code"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"reviews",children:"Reviews"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /reviews/create"})," - Create review"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /reviews/batch/:batchId"})," - Get batch reviews"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"PUT /reviews/:id"})," - Update review"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"admin-admin-only",children:"Admin (Admin only)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /admin/dashboard"})," - Admin dashboard stats"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /admin/users"})," - List all users"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"PUT /admin/users/:id"})," - Update user"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"DELETE /admin/users/:id"})," - Delete user"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /admin/categories"})," - Manage categories"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /admin/permissions"})," - Manage permissions"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"-testing-the-api",children:"\ud83e\uddea Testing the API"}),"\n",(0,s.jsx)(n.h3,{id:"using-curl",children:"Using cURL"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Login\ncurl -X POST https://api.agritrace.vn/api/auth/login \\\n  -H "Content-Type: application/json" \\\n  -d \'{"email": "farmer@example.com", "password": "password123"}\'\n\n# Create batch (with token)\ncurl -X POST https://api.agritrace.vn/api/batches/create \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer YOUR_TOKEN" \\\n  -d \'{\n    "productName": "Mango",\n    "weight": 20,\n    "unit": "kg",\n    "harvestDate": "2024-06-20",\n    "cultivationMethod": "organic"\n  }\'\n'})}),"\n",(0,s.jsx)(n.h3,{id:"using-postman",children:"Using Postman"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Import the AgriTrace API collection"}),"\n",(0,s.jsxs)(n.li,{children:["Set the base URL: ",(0,s.jsx)(n.code,{children:"https://api.agritrace.vn/api"})]}),"\n",(0,s.jsx)(n.li,{children:"Use the login endpoint to get a token"}),"\n",(0,s.jsx)(n.li,{children:"Set the Authorization header with the token"}),"\n",(0,s.jsx)(n.li,{children:"Test other endpoints"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"-support",children:"\ud83d\udcde Support"}),"\n",(0,s.jsx)(n.p,{children:"For API support and questions:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Email"}),": ",(0,s.jsx)(n.a,{href:"mailto:api-support@agritrace.vn",children:"api-support@agritrace.vn"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Documentation"}),": ",(0,s.jsx)(n.a,{href:"https://github.com/vietvo371/AgriTrace/wiki",children:"GitHub Wiki"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Issues"}),": ",(0,s.jsx)(n.a,{href:"https://github.com/vietvo371/AgriTrace/issues",children:"GitHub Issues"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"AgriTrace API - Empowering agricultural traceability through simple, secure, and scalable endpoints."})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>c});var s=i(6540);const r={},t=s.createContext(r);function a(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);