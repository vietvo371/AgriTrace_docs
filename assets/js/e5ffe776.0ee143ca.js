"use strict";(self.webpackChunkagritrace_docs=self.webpackChunkagritrace_docs||[]).push([[154],{7357:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>l});var s=n(4848),i=n(8453);const r={},t="Database Schema Documentation",d={id:"Database",title:"Database Schema Documentation",description:"\ud83d\udcca Overview",source:"@site/docs/Database.md",sourceDirName:".",slug:"/Database",permalink:"/AgriTrace_docs/Database",draft:!1,unlisted:!1,editUrl:"https://github.com/vietvo371/AgriTrace_docs/edit/main/docs/Database.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"AgriTrace Installation Guide",permalink:"/AgriTrace_docs/Installation"},next:{title:"\ud83d\udc68\u200d\ud83c\udf3e Farmer Guide",permalink:"/AgriTrace_docs/Guides/farmer-guide"}},c={},l=[{value:"\ud83d\udcca Overview",id:"-overview",level:2},{value:"\ud83c\udfd7\ufe0f Database Architecture",id:"\ufe0f-database-architecture",level:2},{value:"Core Tables",id:"core-tables",level:3},{value:"\ud83d\udc65 Users Table",id:"-users-table",level:2},{value:"Sample Data",id:"sample-data",level:3},{value:"\ud83c\udf4e Products Table",id:"-products-table",level:2},{value:"Sample Data",id:"sample-data-1",level:3},{value:"\ud83d\udce6 Batches Table",id:"-batches-table",level:2},{value:"Sample Data",id:"sample-data-2",level:3},{value:"\ud83d\udcf8 Batch_Images Table",id:"-batch_images-table",level:2},{value:"Sample Data",id:"sample-data-3",level:3},{value:"\u2b50 Reviews Table",id:"-reviews-table",level:2},{value:"Sample Data",id:"sample-data-4",level:3},{value:"\ud83d\udcca QR_Access_Logs Table",id:"-qr_access_logs-table",level:2},{value:"Sample Data",id:"sample-data-5",level:3},{value:"\ud83d\udd17 Database Relationships",id:"-database-relationships",level:2},{value:"\ud83d\udcc8 Sample Queries",id:"-sample-queries",level:2},{value:"Get Batch Details with User and Product Info",id:"get-batch-details-with-user-and-product-info",level:3},{value:"Get QR Code Access Analytics",id:"get-qr-code-access-analytics",level:3},{value:"Get Farmer Performance Metrics",id:"get-farmer-performance-metrics",level:3},{value:"\ud83d\udd12 Security Features",id:"-security-features",level:2},{value:"Data Protection",id:"data-protection",level:3},{value:"Access Control",id:"access-control",level:3},{value:"\ud83d\udcca Performance Optimization",id:"-performance-optimization",level:2},{value:"Indexes",id:"indexes",level:3},{value:"Query Optimization",id:"query-optimization",level:3},{value:"\ud83d\udd04 Data Maintenance",id:"-data-maintenance",level:2},{value:"Backup Strategy",id:"backup-strategy",level:3},{value:"Cleanup Procedures",id:"cleanup-procedures",level:3},{value:"\ud83d\ude80 Migration Scripts",id:"-migration-scripts",level:2},{value:"Database Setup",id:"database-setup",level:3},{value:"Version Control",id:"version-control",level:3}];function o(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.h1,{id:"database-schema-documentation",children:"Database Schema Documentation"}),"\n",(0,s.jsx)(a.h2,{id:"-overview",children:"\ud83d\udcca Overview"}),"\n",(0,s.jsxs)(a.p,{children:["AgriTrace uses a ",(0,s.jsx)(a.strong,{children:"MySQL/PostgreSQL"})," relational database to store agricultural product traceability data. The database is designed to support QR code generation, batch management, user reviews, and access tracking for Vietnamese farmers and cooperatives."]}),"\n",(0,s.jsx)(a.h2,{id:"\ufe0f-database-architecture",children:"\ud83c\udfd7\ufe0f Database Architecture"}),"\n",(0,s.jsx)(a.h3,{id:"core-tables",children:"Core Tables"}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Users"})," - Farmer and cooperative management"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Products"})," - Product catalog management"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Batches"})," - Product batch tracking with QR codes"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Batch_Images"})," - Image management for batches"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Reviews"})," - Consumer feedback system"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"QR_Access_Logs"})," - QR code scanning analytics"]}),"\n"]}),"\n",(0,s.jsx)(a.h2,{id:"-users-table",children:"\ud83d\udc65 Users Table"}),"\n",(0,s.jsx)(a.p,{children:"Manages farmer and cooperative information."}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"CREATE TABLE Users (\n    user_id INT PRIMARY KEY AUTO_INCREMENT,\n    full_name VARCHAR(255) NOT NULL,\n    phone_number VARCHAR(20) NOT NULL,\n    email VARCHAR(255) UNIQUE NOT NULL,\n    password_hash VARCHAR(255) NOT NULL,\n    address VARCHAR(500) NOT NULL,\n    profile_image VARCHAR(500),\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n    role ENUM('farmer', 'cooperative') NOT NULL,\n    \n    INDEX idx_email (email),\n    INDEX idx_phone (phone_number),\n    INDEX idx_role (role)\n);\n"})}),"\n",(0,s.jsx)(a.h3,{id:"sample-data",children:"Sample Data"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"INSERT INTO Users (full_name, phone_number, email, password_hash, address, role) VALUES\n('Nguyen Van A', '0901234567', 'farmer@example.com', '$2b$10$...', 'Xa Tan Binh, Huyen Long An, Tinh Long An', 'farmer'),\n('Hop Tac Xa Xoai Long An', '0909876543', 'coop@example.com', '$2b$10$...', 'Xa Tan Thanh, Huyen Long An, Tinh Long An', 'cooperative');\n"})}),"\n",(0,s.jsx)(a.h2,{id:"-products-table",children:"\ud83c\udf4e Products Table"}),"\n",(0,s.jsx)(a.p,{children:"Manages product catalog for traceability."}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"CREATE TABLE Products (\n    product_id INT PRIMARY KEY AUTO_INCREMENT,\n    name VARCHAR(255) NOT NULL,\n    description TEXT,\n    \n    INDEX idx_name (name)\n);\n"})}),"\n",(0,s.jsx)(a.h3,{id:"sample-data-1",children:"Sample Data"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"INSERT INTO Products (name, description) VALUES\n('Xoai Cat Chu', 'Xoai Cat Chu Long An - Giong ngon truyen thong'),\n('Rau Cai Xanh', 'Rau cai xanh tuoi ngon'),\n('Cam Sanh', 'Cam Sanh mien Tay - Ngot mat tu nhien');\n"})}),"\n",(0,s.jsx)(a.h2,{id:"-batches-table",children:"\ud83d\udce6 Batches Table"}),"\n",(0,s.jsx)(a.p,{children:"Core table for product batch management with QR codes."}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"CREATE TABLE Batches (\n    batch_id INT PRIMARY KEY AUTO_INCREMENT,\n    user_id INT NOT NULL,\n    product_id INT NOT NULL,\n    batch_code VARCHAR(50) UNIQUE NOT NULL,\n    weight FLOAT NOT NULL,\n    variety VARCHAR(255),\n    planting_date DATE,\n    harvest_date DATE,\n    cultivation_method VARCHAR(100),\n    location VARCHAR(500) NOT NULL,\n    gps_coordinates VARCHAR(100),\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n    qr_code VARCHAR(500),\n    qr_expiry DATETIME,\n    \n    FOREIGN KEY (user_id) REFERENCES Users(user_id) ON DELETE CASCADE,\n    FOREIGN KEY (product_id) REFERENCES Products(product_id) ON DELETE CASCADE,\n    \n    INDEX idx_batch_code (batch_code),\n    INDEX idx_user_id (user_id),\n    INDEX idx_product_id (product_id),\n    INDEX idx_harvest_date (harvest_date),\n    INDEX idx_qr_expiry (qr_expiry)\n);\n"})}),"\n",(0,s.jsx)(a.h3,{id:"sample-data-2",children:"Sample Data"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"INSERT INTO Batches (user_id, product_id, batch_code, weight, variety, planting_date, harvest_date, cultivation_method, location, gps_coordinates, qr_code, qr_expiry) VALUES\n(1, 1, 'BATCH20250722_001', 20.5, 'Cat Chu Long An', '2025-01-15', '2025-07-20', 'huu co', 'Xa Tan Binh, Huyen Long An, Tinh Long An', '10.123456,106.789012', 'qr_20250722_001.png', '2026-01-22 00:00:00'),\n(1, 2, 'BATCH20250722_002', 5.0, 'Cai Xanh', '2025-02-01', '2025-07-18', 'truyen thong', 'Xa Tan Binh, Huyen Long An, Tinh Long An', '10.123457,106.789013', 'qr_20250722_002.png', '2026-01-22 00:00:00');\n"})}),"\n",(0,s.jsx)(a.h2,{id:"-batch_images-table",children:"\ud83d\udcf8 Batch_Images Table"}),"\n",(0,s.jsx)(a.p,{children:"Manages images for product batches."}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"CREATE TABLE Batch_Images (\n    image_id INT PRIMARY KEY AUTO_INCREMENT,\n    batch_id INT NOT NULL,\n    image_url VARCHAR(500) NOT NULL,\n    image_type ENUM('farm', 'product', 'farmer') NOT NULL,\n    \n    FOREIGN KEY (batch_id) REFERENCES Batches(batch_id) ON DELETE CASCADE,\n    \n    INDEX idx_batch_id (batch_id),\n    INDEX idx_image_type (image_type)\n);\n"})}),"\n",(0,s.jsx)(a.h3,{id:"sample-data-3",children:"Sample Data"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"INSERT INTO Batch_Images (batch_id, image_url, image_type) VALUES\n(1, '/uploads/farm_20250722_001.jpg', 'farm'),\n(1, '/uploads/product_20250722_001.jpg', 'product'),\n(1, '/uploads/farmer_20250722_001.jpg', 'farmer');\n"})}),"\n",(0,s.jsx)(a.h2,{id:"-reviews-table",children:"\u2b50 Reviews Table"}),"\n",(0,s.jsx)(a.p,{children:"Consumer feedback and rating system."}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"CREATE TABLE Reviews (\n    review_id INT PRIMARY KEY AUTO_INCREMENT,\n    batch_id INT NOT NULL,\n    user_id INT NULL,\n    rating INT NOT NULL CHECK (rating >= 1 AND rating <= 5),\n    comment TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n    \n    FOREIGN KEY (batch_id) REFERENCES Batches(batch_id) ON DELETE CASCADE,\n    FOREIGN KEY (user_id) REFERENCES Users(user_id) ON DELETE SET NULL,\n    \n    INDEX idx_batch_id (batch_id),\n    INDEX idx_user_id (user_id),\n    INDEX idx_rating (rating),\n    INDEX idx_created_at (created_at)\n);\n"})}),"\n",(0,s.jsx)(a.h3,{id:"sample-data-4",children:"Sample Data"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"INSERT INTO Reviews (batch_id, user_id, rating, comment) VALUES\n(1, NULL, 5, 'Xoai ngon qua! Rat tuoi va ngot'),\n(1, NULL, 4, 'Chat luong tot, se mua lai'),\n(1, NULL, 5, 'Nguon goc ro rang, an tam');\n"})}),"\n",(0,s.jsx)(a.h2,{id:"-qr_access_logs-table",children:"\ud83d\udcca QR_Access_Logs Table"}),"\n",(0,s.jsx)(a.p,{children:"Tracks QR code scanning analytics."}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"CREATE TABLE QR_Access_Logs (\n    log_id INT PRIMARY KEY AUTO_INCREMENT,\n    batch_id INT NOT NULL,\n    access_time DATETIME DEFAULT CURRENT_TIMESTAMP,\n    ip_address VARCHAR(45),\n    device_info VARCHAR(500),\n    \n    FOREIGN KEY (batch_id) REFERENCES Batches(batch_id) ON DELETE CASCADE,\n    \n    INDEX idx_batch_id (batch_id),\n    INDEX idx_access_time (access_time),\n    INDEX idx_ip_address (ip_address)\n);\n"})}),"\n",(0,s.jsx)(a.h3,{id:"sample-data-5",children:"Sample Data"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"INSERT INTO QR_Access_Logs (batch_id, ip_address, device_info) VALUES\n(1, '192.168.1.100', 'iPhone 14, iOS 17.0'),\n(1, '192.168.1.101', 'Samsung Galaxy S23, Android 13'),\n(1, '192.168.1.102', 'Desktop Chrome 120.0');\n"})}),"\n",(0,s.jsx)(a.h2,{id:"-database-relationships",children:"\ud83d\udd17 Database Relationships"}),"\n",(0,s.jsxs)(a.table,{children:[(0,s.jsx)(a.thead,{children:(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.th,{children:"Table"}),(0,s.jsx)(a.th,{children:"Primary Key"}),(0,s.jsx)(a.th,{children:"Foreign Keys"}),(0,s.jsx)(a.th,{children:"Description"})]})}),(0,s.jsxs)(a.tbody,{children:[(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"Users"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"user_id"})}),(0,s.jsx)(a.td,{children:"-"}),(0,s.jsx)(a.td,{children:"Core user management"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"Products"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"product_id"})}),(0,s.jsx)(a.td,{children:"-"}),(0,s.jsx)(a.td,{children:"Product catalog"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"Batches"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"batch_id"})}),(0,s.jsxs)(a.td,{children:[(0,s.jsx)(a.code,{children:"user_id"}),", ",(0,s.jsx)(a.code,{children:"product_id"})]}),(0,s.jsx)(a.td,{children:"Main traceability table"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"Batch_Images"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"image_id"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"batch_id"})}),(0,s.jsx)(a.td,{children:"Image management"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"Reviews"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"review_id"})}),(0,s.jsxs)(a.td,{children:[(0,s.jsx)(a.code,{children:"batch_id"}),", ",(0,s.jsx)(a.code,{children:"user_id"})]}),(0,s.jsx)(a.td,{children:"Consumer feedback"})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:(0,s.jsx)(a.strong,{children:"QR_Access_Logs"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"log_id"})}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.code,{children:"batch_id"})}),(0,s.jsx)(a.td,{children:"Analytics tracking"})]})]})]}),"\n",(0,s.jsx)(a.h2,{id:"-sample-queries",children:"\ud83d\udcc8 Sample Queries"}),"\n",(0,s.jsx)(a.h3,{id:"get-batch-details-with-user-and-product-info",children:"Get Batch Details with User and Product Info"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"SELECT \n    b.batch_code,\n    b.weight,\n    b.variety,\n    b.harvest_date,\n    b.cultivation_method,\n    b.location,\n    u.full_name as farmer_name,\n    p.name as product_name,\n    AVG(r.rating) as avg_rating,\n    COUNT(r.review_id) as review_count\nFROM Batches b\nJOIN Users u ON b.user_id = u.user_id\nJOIN Products p ON b.product_id = p.product_id\nLEFT JOIN Reviews r ON b.batch_id = r.batch_id\nWHERE b.batch_id = 1\nGROUP BY b.batch_id;\n"})}),"\n",(0,s.jsx)(a.h3,{id:"get-qr-code-access-analytics",children:"Get QR Code Access Analytics"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"SELECT \n    b.batch_code,\n    COUNT(qal.log_id) as scan_count,\n    DATE(qal.access_time) as scan_date,\n    COUNT(DISTINCT qal.ip_address) as unique_visitors\nFROM Batches b\nLEFT JOIN QR_Access_Logs qal ON b.batch_id = qal.batch_id\nWHERE b.user_id = 1\nGROUP BY b.batch_id, DATE(qal.access_time)\nORDER BY scan_date DESC;\n"})}),"\n",(0,s.jsx)(a.h3,{id:"get-farmer-performance-metrics",children:"Get Farmer Performance Metrics"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"SELECT \n    u.full_name,\n    COUNT(b.batch_id) as total_batches,\n    SUM(b.weight) as total_weight,\n    AVG(r.rating) as avg_rating,\n    COUNT(DISTINCT qal.ip_address) as total_scans\nFROM Users u\nLEFT JOIN Batches b ON u.user_id = b.user_id\nLEFT JOIN Reviews r ON b.batch_id = r.batch_id\nLEFT JOIN QR_Access_Logs qal ON b.batch_id = qal.batch_id\nWHERE u.role = 'farmer'\nGROUP BY u.user_id;\n"})}),"\n",(0,s.jsx)(a.h2,{id:"-security-features",children:"\ud83d\udd12 Security Features"}),"\n",(0,s.jsx)(a.h3,{id:"data-protection",children:"Data Protection"}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Password Hashing"}),": All passwords are hashed using bcrypt"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"IP Anonymization"}),": IP addresses are partially masked for privacy"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"QR Expiration"}),": QR codes expire after 6 months for security"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Input Validation"}),": All user inputs are validated and sanitized"]}),"\n"]}),"\n",(0,s.jsx)(a.h3,{id:"access-control",children:"Access Control"}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Role-based Access"}),": Different permissions for farmers vs cooperatives"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Session Management"}),": Secure session handling with JWT tokens"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Rate Limiting"}),": API rate limiting to prevent abuse"]}),"\n"]}),"\n",(0,s.jsx)(a.h2,{id:"-performance-optimization",children:"\ud83d\udcca Performance Optimization"}),"\n",(0,s.jsx)(a.h3,{id:"indexes",children:"Indexes"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"-- Composite indexes for common queries\nCREATE INDEX idx_batches_user_date ON Batches(user_id, harvest_date);\nCREATE INDEX idx_reviews_batch_rating ON Reviews(batch_id, rating);\nCREATE INDEX idx_logs_batch_time ON QR_Access_Logs(batch_id, access_time);\n"})}),"\n",(0,s.jsx)(a.h3,{id:"query-optimization",children:"Query Optimization"}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsx)(a.li,{children:"Use prepared statements for repeated queries"}),"\n",(0,s.jsx)(a.li,{children:"Implement connection pooling"}),"\n",(0,s.jsx)(a.li,{children:"Cache frequently accessed data"}),"\n",(0,s.jsx)(a.li,{children:"Optimize image storage and delivery"}),"\n"]}),"\n",(0,s.jsx)(a.h2,{id:"-data-maintenance",children:"\ud83d\udd04 Data Maintenance"}),"\n",(0,s.jsx)(a.h3,{id:"backup-strategy",children:"Backup Strategy"}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Daily Backups"}),": Automated daily database backups"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Point-in-time Recovery"}),": Support for specific time recovery"]}),"\n",(0,s.jsxs)(a.li,{children:[(0,s.jsx)(a.strong,{children:"Offsite Storage"}),": Secure cloud backup storage"]}),"\n"]}),"\n",(0,s.jsx)(a.h3,{id:"cleanup-procedures",children:"Cleanup Procedures"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"-- Clean expired QR codes (older than 6 months)\nDELETE FROM Batches WHERE qr_expiry < NOW();\n\n-- Archive old access logs (older than 1 year)\n-- Move to archive table or delete based on policy\n"})}),"\n",(0,s.jsx)(a.h2,{id:"-migration-scripts",children:"\ud83d\ude80 Migration Scripts"}),"\n",(0,s.jsx)(a.h3,{id:"database-setup",children:"Database Setup"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-sql",children:"-- Create database\nCREATE DATABASE agritrace_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n\n-- Use database\nUSE agritrace_db;\n\n-- Run all CREATE TABLE statements above\n-- Insert sample data\n-- Create indexes\n"})}),"\n",(0,s.jsx)(a.h3,{id:"version-control",children:"Version Control"}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsx)(a.li,{children:"Use semantic versioning for schema changes"}),"\n",(0,s.jsx)(a.li,{children:"Maintain migration scripts for each version"}),"\n",(0,s.jsx)(a.li,{children:"Test migrations on staging environment first"}),"\n",(0,s.jsx)(a.li,{children:"Document all schema changes"}),"\n"]})]})}function h(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,a,n)=>{n.d(a,{R:()=>t,x:()=>d});var s=n(6540);const i={},r=s.createContext(i);function t(e){const a=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function d(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(r.Provider,{value:a},e.children)}}}]);