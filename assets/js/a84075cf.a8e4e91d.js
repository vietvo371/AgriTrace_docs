"use strict";(self.webpackChunkagritrace_docs=self.webpackChunkagritrace_docs||[]).push([[375],{2075:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>o});var r=s(4848),a=s(8453);const i={id:"login",title:"Login",sidebar_label:"Login"},t="Login",d={id:"auth/login",title:"Login",description:"Authenticate a user and receive an access token.",source:"@site/api/auth/login.md",sourceDirName:"auth",slug:"/auth/login",permalink:"/AgriTrace_docs/api-reference/auth/login",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"login",title:"Login",sidebar_label:"Login"},sidebar:"apiSidebar",previous:{title:"\ud83d\udcda API Overview",permalink:"/AgriTrace_docs/api-reference/"},next:{title:"\ud83d\udce6 Create Batch",permalink:"/AgriTrace_docs/api-reference/batches/create"}},l={},o=[{value:"Endpoint",id:"endpoint",level:2},{value:"Description",id:"description",level:2},{value:"Request",id:"request",level:2},{value:"Headers",id:"headers",level:3},{value:"Body",id:"body",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Response",id:"response",level:2},{value:"Success Response (200)",id:"success-response-200",level:3},{value:"Error Responses",id:"error-responses",level:3},{value:"Invalid Credentials (401)",id:"invalid-credentials-401",level:4},{value:"Validation Error (422)",id:"validation-error-422",level:4},{value:"Account Suspended (403)",id:"account-suspended-403",level:4},{value:"Examples",id:"examples",level:2},{value:"cURL",id:"curl",level:3},{value:"JavaScript",id:"javascript",level:3},{value:"React Native",id:"react-native",level:3},{value:"Notes",id:"notes",level:2},{value:"Related Endpoints",id:"related-endpoints",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"login",children:"Login"}),"\n",(0,r.jsx)(n.p,{children:"Authenticate a user and receive an access token."}),"\n",(0,r.jsx)(n.h2,{id:"endpoint",children:"Endpoint"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"POST /auth/login\n"})}),"\n",(0,r.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,r.jsx)(n.p,{children:"This endpoint allows users to authenticate with their email and password. Upon successful authentication, a JWT token is returned that should be included in subsequent API requests."}),"\n",(0,r.jsx)(n.h2,{id:"request",children:"Request"}),"\n",(0,r.jsx)(n.h3,{id:"headers",children:"Headers"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Header"}),(0,r.jsx)(n.th,{children:"Value"}),(0,r.jsx)(n.th,{children:"Required"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Content-Type"}),(0,r.jsx)(n.td,{children:"application/json"}),(0,r.jsx)(n.td,{children:"Yes"})]})})]}),"\n",(0,r.jsx)(n.h3,{id:"body",children:"Body"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "email": "farmer@example.com",\n  "password": "your_password"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"email"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"User's email address"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"password"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"User's password"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"response",children:"Response"}),"\n",(0,r.jsx)(n.h3,{id:"success-response-200",children:"Success Response (200)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoiZmFybWVyQGV4YW1wbGUuY29tIiwicm9sZSI6ImZhcm1lciIsImlhdCI6MTY0MDk5NTIwMCwiZXhwIjoxNjQxMDgxNjAwfQ.signature",\n    "user": {\n      "id": 1,\n      "email": "farmer@example.com",\n      "fullName": "Nguyen Van A",\n      "role": "farmer",\n      "phone": "+84123456789",\n      "address": "Binh Duong Province, Vietnam",\n      "createdAt": "2024-01-15T10:30:00Z"\n    }\n  },\n  "message": "Login successful"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"error-responses",children:"Error Responses"}),"\n",(0,r.jsx)(n.h4,{id:"invalid-credentials-401",children:"Invalid Credentials (401)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "error": {\n    "code": "INVALID_CREDENTIALS",\n    "message": "Invalid email or password"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"validation-error-422",children:"Validation Error (422)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "error": {\n    "code": "VALIDATION_ERROR",\n    "message": "Invalid input data",\n    "details": [\n      {\n        "field": "email",\n        "message": "Email is required"\n      },\n      {\n        "field": "password",\n        "message": "Password must be at least 6 characters"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"account-suspended-403",children:"Account Suspended (403)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "error": {\n    "code": "ACCOUNT_SUSPENDED",\n    "message": "Your account has been suspended. Please contact support."\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h3,{id:"curl",children:"cURL"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://api.agritrace.vn/api/auth/login \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "email": "farmer@example.com",\n    "password": "password123"\n  }\'\n'})}),"\n",(0,r.jsx)(n.h3,{id:"javascript",children:"JavaScript"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const loginUser = async (email, password) => {\n  try {\n    const response = await fetch('https://api.agritrace.vn/api/auth/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ email, password }),\n    });\n\n    const data = await response.json();\n\n    if (data.success) {\n      // Store token for future requests\n      localStorage.setItem('authToken', data.data.token);\n      return data.data.user;\n    } else {\n      throw new Error(data.error.message);\n    }\n  } catch (error) {\n    console.error('Login failed:', error);\n    throw error;\n  }\n};\n\n// Usage\nloginUser('farmer@example.com', 'password123')\n  .then(user => {\n    console.log('Logged in user:', user);\n  })\n  .catch(error => {\n    console.error('Login error:', error);\n  });\n"})}),"\n",(0,r.jsx)(n.h3,{id:"react-native",children:"React Native"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst loginUser = async (email, password) => {\n  try {\n    const response = await fetch('https://api.agritrace.vn/api/auth/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ email, password }),\n    });\n\n    const data = await response.json();\n\n    if (data.success) {\n      // Store token securely\n      await AsyncStorage.setItem('authToken', data.data.token);\n      return data.data.user;\n    } else {\n      throw new Error(data.error.message);\n    }\n  } catch (error) {\n    console.error('Login failed:', error);\n    throw error;\n  }\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The JWT token expires after 7 days"}),"\n",(0,r.jsx)(n.li,{children:"Store the token securely (localStorage for web, AsyncStorage for mobile)"}),"\n",(0,r.jsx)(n.li,{children:"Include the token in the Authorization header for subsequent requests"}),"\n",(0,r.jsx)(n.li,{children:"The token contains user information and permissions"}),"\n",(0,r.jsx)(n.li,{children:"Rate limiting: 10 requests per minute per IP address"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"related-endpoints",children:"Related Endpoints"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/api/auth/register",children:"Register"})," - Create a new account"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/api/auth/refresh",children:"Refresh Token"})," - Refresh expired token"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/api/auth/logout",children:"Logout"})," - Invalidate current token"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>d});var r=s(6540);const a={},i=r.createContext(a);function t(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);